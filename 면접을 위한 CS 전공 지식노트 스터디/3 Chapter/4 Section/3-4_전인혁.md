# Section4. CPU 스케줄링 알고리즘

- CPU 스케줄러는 CPU 스케줄링 알고리즘에 따라 프로세스에서 해야할 일을 스레드 단위로 CPU에 할당.

![Untitled](./3-4_%EC%A0%84%EC%9D%B8%ED%98%81_image/Untitled.png)

- 프로그램이 실행될 때는 CPU 스케줄링 알고리즘이 어떤 프로그램에 CPU 소유권을 줄 것인지 결정.
- 이 알고리즘은
  - CPU 이용률은 높게,
  - 주어진 시간에 많은 일을 하게,
  - 준비 큐에 있는 프로세스는 적게,
  - 응답 시간을 짧게 설정하는 것을 목표로 함.

# 3.4.1 비선점형 방식

- 프로세스가 스스로 CPU 소유권을 포기하는 방식
- 강제로 프로세스를 중지하지 않음.
- 컨텍스트 스위칭으로 인한 부하가 적다.

## FCFS

- First Come, First Served
- 가장 먼저 온 것을 가장 먼저 처리하는 알고리즘
- 길게 수행되는 프로세스 때문에, 준비 큐에서 오래 기다리는 현상이 발생하는 단점.

## SJF

- Shortest Job First
- 실행 시간이 가장 짧은 프로세스를 가장 먼저 실행하는 알고리즘
- 긴 시간을 가진 프로세스가 실행되지 않는 현상이 일어나며 평균 대기 시간이 가장 짧음.
- 실제로는 실행 시간을 알 수 없기 때문에, 과거의 실행했던 시간을 토대로 추측해서 사용

### 우선 순위

- 기존 SJF 스케줄링의 경우, 긴 시간을 가진 프로세스가 실행되지 않는 현상이 있었음.
- 오래된 작업일수록 우선순위를 높이는 방법(aging)을 통해 단점을 보완한 알고리즘을 뜻함.

# 3.4.2 선점형 방식

- 현대 운영체제가 쓰는 방식으로 지금 사용하고 있는 프로세스를 알고리즘에 의해 중단시켜 버리고, 강제로 다른 프로세스에 CPU 소유권을 할당하는 방식.

## 라운드 로빈

- 현대 컴퓨터가 쓰는 스케줄링인 우선순위 스케줄링의 일종.
- 각 프로세스는 동일한 할당 시간을 주고,
  - 그 시간안에 끝나지 않으면, 다시 준비큐의 뒤로 가는 알고리즘.
- ex) q만큼의 할당시간이 부여되었고, N개의 프로세스가 운영되면,
  - (N-1) \* q 시간이 지나면 자기 차례가 옴.
  - 할당 시간이 너무 크면
    - FCFS가 되고,
  - 너무 짧으면
    - 컨텍스트 스위칭이 잦아져 오버헤드, 즉 비용이 커짐.
  - 일반적으로 전체 작업 시간은 길어지지만 평균 응답시간을 짧아짐.

## SRF

- SJF는 중간에 실행 시간이 더 짧은 작업이 들어와도 기존 짧은 작업을 모두 수행하고,
  - 그 다음 짧은 작업을 이어나가는데
  - SRF는 중간에 더 짧은 작업이 들어오면 수행하던 프로세스를 중지하고,
  - 해당 프로세스를 수행하는 알고리즘.

## 다단계 큐

- 우선 순위에 따른 준비 큐를 여러 개 사용.
- 큐마다 라운드 로빈이나 FCFS 등 다른 스케줄링 알고리즘을 적용한 것.
- 큐 간의 프로세스 이동이 안되므로,
  - 스케줄링 부담이 적지만
  - 유연성이 떨어지는 특징이 있음.
    ![Untitled](./3-4_%EC%A0%84%EC%9D%B8%ED%98%81_image/Untitled%201.png)

# 예상 질문

## 운영체제의 역할

- 크게 4가지
  - **CPU 스케줄링과 프로세스 관리**
    - CPU 소유권을 어떤 프로세스에 할당할 지, 프로세스의 생성과 삭제, 자원할당 및 반환을 관리
  - **메모리 관리**
    - 한정된 메모리를 어떤 프로세스에 얼만큼 할당해야 하는지 관리
  - **디스크 파일 관리**
    - 디스크 파일을 어떠한 방법으로 보관할지 관리
  - **I/O 디바이스 관리**
    - I/O 디바이스들인 마우스, 키보드 등과 컴퓨터 간에 데이터를 주고받는 것을 관리

## PCB

- 운영체제에서 프로세스에 대한 메타데이터를 저장한 ‘데이터’를 말함.
- 프로세스 제어 블록이라고도 함.
- 프로세스가 생성되면 운영체제는 해당 PCB를 생성.
- 프로그램이 실행되면 프로세스가 생성됨.
- 프로세스 주소 값들에, 스택, 힙 등의 구조를 기반으로 메모리가 할당됨.
- 프로세스의 메타 데이터들이 PCB에 저장되어 관리 됨.
- 메타데이터는 프로세스의 중요한 정보를 포함하고 있기에,
  - 일반 사용자가 접근하지 못하도록 커널 스택의 가장 앞부분에서 관리됨.

## 메모리 계층

- 레지스터, 캐시, 메모리, 저장장치로 구성됨.
- 레지스터 : CPU 안의 작은 메모리.
  - 휘발성, 속도가장 빠름, 기억 용량이 가장 낮음.
- 캐시
  - 휘발성, 속도 빠름, 기억용량이 낮음.
- 주기억 장치
  - RAM을 지칭함.
  - 휘발성, 속도 보통, 기억용량 보통
- 보조 기억장치
  - HDD, SSD
  - 휘발성, 속도 낮음, 기억용량 높음
