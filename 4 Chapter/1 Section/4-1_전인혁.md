# Section1. 데이터베이스의 기본

- 데이터베이스란?
  - 일정한 규칙, 규약을 통해 구조화 되어 저장되는 데이터의 모음
- 데이터베이스를 제어, 관리 하는 통합 시스템을 DBMS라고 함.
- DB 안의 데이터들은 특정 DBMS 마다 정의된 쿼리 언어를 통해 삽입, 삭제, 수정, 조회 등을 수행할 수 있음.
- 또한, 실시간 접근과 동시 공유가 가능.

![Untitled](./4-1_%EC%A0%84%EC%9D%B8%ED%98%81_image/Untitled.png)

- DB위에 DBMS가 있고, 그 위에 응용프로그램이 있음.
- 이러한 구조를 기반으로 데이터를 주고 받음.

# 4.1.1 엔터티

- 엔터티란, 사람 장소, 물건, 사건, 개념 등 여러 개의 속성을 지닌 명사를 의미.
- ex) 회원이라는 엔터티가 있을때,
  - 회원은 이름, 아이디, 주소, 전화번호라는 속성을 가짐.

## 약한 엔터티와 강한 엔터티

- 약한 엔터티
  - 혼자서는 존재하지 못함
- 강한 엔터티
  - 특정 약한 엔터티를 하위 종속 대상으로 갖는 엔터티
- ex) 방과 건물이 있을때, 방은 약한 엔터티, 건물은 강한 엔터티

# 4.1.2 릴레이션

- 데이터베이스에서 정보를 구분하여 저장하는 기본단위
- 엔터티에 관한 데이터를 데이터베이스는 릴레이션 하나에 담아서 관리

![Untitled](./4-1_%EC%A0%84%EC%9D%B8%ED%98%81_image/Untitled%201.png)

- 회원이라는 엔터티는 DB 상에서 관리될 때 릴레이션으로 변화함.
- 관계형 데이터베이스에서 릴레이션은 **테이블**이라고 하며, NoSQL에서는 **컬렉션**이라고 함.

## 테이블과 컬렉션

- DB 종류
  - 관계형 데이터베이스
    - ex) MySQL : 레코드-테이블-데이터베이스 구조
      ![Untitled](./4-1_%EC%A0%84%EC%9D%B8%ED%98%81_image/Untitled%202.png)
  - NoSQL 데이터베이스
    - ex) MongoDB : 도큐먼트-컬렉션-데이터베이스 구조

# 4.1.3 속성

- 릴레이션에서 관리하는 구체적이며 고유한 이름을 갖는 정보.
- 서비스 요구사항을 기반으로 관리해야 할 필요가 있는 속성들만 엔터티의 속성이 됨.

# 4.1.4 도메인

- 릴레이션에 포함된 각각의 속성들이 가질 수 있는 값의 집합을 ㅁ라함.
- 성별이라는 속성이 있다면, 이 속성이 가질 수 있는 값은 {남, 여}라는 집합.
  ![Untitled](./4-1_%EC%A0%84%EC%9D%B8%ED%98%81_image/Untitled%203.png)

# 4.1.5 필드와 레코드

- 앞서 설명한 것들을 기반으로,
  - 데이터베이스에서 필드와 레코드로 구성된 테이블을 만들 수 있다.

![Untitled](./4-1_%EC%A0%84%EC%9D%B8%ED%98%81_image/Untitled%204.png)

- 엔터티 : 회원
- 릴레이션 : (테이블) member
- 레코드 : 행 단위의 데이터(row, 튜플)

## 필드 타입

- 필드는 타입을 가짐.

### 숫자 타입

- TINYINT, SMALLINT, MEDIUMINT, INT, BIGINT 등

![Untitled](./4-1_%EC%A0%84%EC%9D%B8%ED%98%81_image/Untitled%205.png)

### 날짜타입

- DATE, DATETIME, TIMESTAMP 등

![Untitled](./4-1_%EC%A0%84%EC%9D%B8%ED%98%81_image/Untitled%206.png)

### 문자 타입

- CHAR ,VARCHAR, TEXT, BLOB, ENUM, SET 등

- **CHAR vs VARCHAR**
  - **CHAR** : 테이블을 생성할 때, 선언한 길이로 고정됨. 0~255사이의 값.
  - **VARCHAR** : 가변 길이 문자열. 0~ 65535 사이의 값.
    - VARCHAR(10000)으로 선언해도, 10글자 저장할 때는
      - 10글자에 해당하는 바이트 + 길이 기록용 1바이트로 저장.
  - CHAR는 검색에 유리.
  - 검색을 별로 하지 않는다면 VARCHAR가 유리.
- **TEXT vs BLOB**
  - TEXT : 큰 문자열 저장에 쓰며, 주로 게시판의 본문을 저장할 때 사용.
  - BLOB : 이미지, 동영상 등 큰 데이터 저장에 사용.
    - 보통은 서버에 파일을 올리고, 파일에 관한 경로를 VARCHAR로 저장하기도 함.
- **ENUM vs SET**
  - 둘 다 문자열을 열거한 타입.

# 4.1.6 관계

- 테이블 간의 관계.
- 관계 화살표
  ![Untitled](./4-1_%EC%A0%84%EC%9D%B8%ED%98%81_image/Untitled%207.png)

## 1:1 관계

![Untitled](./4-1_%EC%A0%84%EC%9D%B8%ED%98%81_image/Untitled%208.png)

- 유저 당 유저이메일은 한개.
- 테이블을 두개의 테이블로 나눠 테이블의 구조를 더 이해하기 쉽게 만들어줌.

## 1:N 관계

![Untitled](./4-1_%EC%A0%84%EC%9D%B8%ED%98%81_image/Untitled%209.png)

- 한 유저가 여러개의 상품을 장바구니에 담음.
- 한 개체가 다른 많은 개체를 포함하는 관계

## N:M 관계

![Untitled](./4-1_%EC%A0%84%EC%9D%B8%ED%98%81_image/Untitled%2010.png)

- 학생과 강의의 관계.
- 학생도 강의를 많이 들을 수있고, 강의도 여러 학생 포함 가능.
- N:M 관계에서는 두 테이블을 직접적으로 연결해 구축하지는 않고, 1:N과 1:M을 갖는 두 테이블로 나눠서 설정함.

# 4.1.7 키

- 테이블 간의 관계를 더 명확히 하고 테이블 자체의 인덱스를 위해 설정된 장치.
- 종류
  - 기본키
  - 외래키
  - 후보키
  - 슈퍼키
  - 대체키

![Untitled](./4-1_%EC%A0%84%EC%9D%B8%ED%98%81_image/Untitled%2011.png)

## 기본키

- Primary Key, PK, 프라이머리키
- 유일성과 최소성을 만족.
- 중복되면 안됨.

## 외래키

![Untitled](./4-1_%EC%A0%84%EC%9D%B8%ED%98%81_image/Untitled%2012.png)

- Foreign Key, FK
- 다른 테이블의 기본 키를 그대로 참조하는 값.
- 개체와의 관계를 식별하는데 사용.
- 중복되어도 괜찮다.

## 후보키

- 기본키가 될 수 있는 후보들.
- 유일성과 최소성을 동시에 만족하는 키

## 대체키

- 후보키가 두 개 이상일 때, 어느 하나를 기본키로 지정하고 남은 후보키들.

## 슈퍼키

- 각 레코드를 유일하게 식별할 수 있는 유일성을 갖춘 키.
